<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title><%= title || "Engi-Log" %></title>

    <!-- BOOTSTRAP -->
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
      rel="stylesheet">

    <!-- CUSTOM CSS -->
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>

<nav class="navbar navbar-expand-lg">
  <div class="container d-flex justify-content-between align-items-center">

      <!-- MARKA -->
      <a class="navbar-brand brand-logo" href="/">
          Engi-Log
      </a>

      <!-- MOBILE -->
      <button class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#mainNav"
              aria-expanded="false">
          <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
      </button>

      <!-- NAV -->
      <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav ms-auto"
              style="align-items:center; gap:1.5rem;">

              <li class="nav-item">
                  <a class="nav-link" href="/sorunlar">Sorunlar</a>
              </li>

              <% if (session?.user) { %>
                  <li class="nav-item">
                      <a class="nav-link" href="/sorunlar/ekle">Yeni Sorun Ekle</a>
                  </li>
              <% } %>

              <li class="nav-item">
                  <a class="nav-link" href="/duyurular">Duyurular</a>
              </li>

              <!-- ADMIN PANEL -->
              <% if (session?.user?.role === "admin") { %>
                  <li class="nav-item">
                      <a class="nav-link text-warning" href="/admin">
                          Admin Panel
                      </a>
                  </li>
              <% } %>

              <!-- AUTH -->
              <% if (session?.user) { %>

                  <li class="nav-item">
                      <span class="nav-link">
                          <%= session.user.ad %>
                          <% if (session.user.role === "admin") { %>
                              <span class="badge bg-warning text-dark ms-1" style="font-size:0.7rem;">Admin</span>
                          <% } else if (session.user.role === "uzman") { %>
                              <span class="badge bg-info text-dark ms-1" style="font-size:0.7rem;">Uzman</span>
                          <% } %>
                      </span>
                  </li>

                  <li class="nav-item">
                      <a class="nav-link text-danger" href="/logout">
                          Çıkış
                      </a>
                  </li>

              <% } else { %>

                  <li class="nav-item">
                      <a class="nav-link" href="/login">Giriş Yap</a>
                  </li>

                  <li class="nav-item">
                      <a class="nav-link" href="/register">Kayıt Ol</a>
                  </li>

              <% } %>

          </ul>
      </div>
  </div>
</nav>
